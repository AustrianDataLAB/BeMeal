---
status: { proposed }
date: { 2024-04-16 }
deciders: { whole team }
---

# Decision on CI

## Context and Problem Statement

Our development pipeline needs a coherent strategy for implementing testing and security scans to ensure robustness and security compliance. Which types of tests and scans should be integrated? Also, a definition is required on how much vulnerabilities are allowed in the built images.

## Decision Drivers

- Reliability of software releases.
- Security and vulnerability management.
- Efficiency of development and CI/CD pipeline.

## Considered Options

1. Unit Testing vs Integration Testing.
2. Usability Scans.
3. Vulnerabilities Scanning (with distinct approaches for backend and frontend).

Blockers:

- None
- Build failures
- Vulnerabilities
- Image Signatures
- Test failures

Vulnerabilities:

- Allow every vulnerability
- Allow certain classes of vulnerabilities
- Allow a threshold of vulnerabilities

Meaningful Tests:

- Infrastructure Availability
- Usability Tests
- Integration Tests

Build Process:

- Build and push processes are handled separately to maintain clarity in the pipeline stages and facilitate troubleshooting.

Severity Management:

- All vulnerabilities are considered, with a focus on those categorized as "High" and "Critical."
- Only critical vulnerabilities are considered significant enough to block the build process, reflecting the different risk profiles and attack surfaces between the two.

## Decision Outcome

Blockers:

- Vulnerabilities and Build Failures are the primary concerns. Image signatures are considered out of scope for this ADR. The separate handling of build and push processes is expected to enhance control over CI stages.

Vulnerabilities:

- Vulnerabilities categorized as "High" and "Critical" will lead to a build failure in the backend. In the frontend, only critical vulnerabilities will trigger a build failure.

Meaningful Tests:

- Infrastructure Availability, Usability Scans and Integration Tests will be mandatory for each build. The goal is to ensure that our application is not only functionally sound but also accessible and reliable under different infrastructure conditions.

Build Process:

- Build and push processes are handled separately to maintain clarity in the pipeline stages and facilitate troubleshooting.

## Consequences

- Good, because prioritizing vulnerabilities reduces potential security threats.
- Good, because including meaningful tests such as infrastructure availability and inegration ensures a broader coverage of application performance and compliance.
- Bad, because the strictness on high and critical vulnerabilities may extend build times and require more intensive mitigation efforts.
